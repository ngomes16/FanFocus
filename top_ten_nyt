import requests
from bs4 import BeautifulSoup
import re

def scrape_nytimes(team_name):
    # Convert team name to lowercase and replace spaces with hyphens for URL formatting
    team_link_code = team_name.lower().split()[-1]
    url = f"https://www.nytimes.com/athletic/nba/team/{team_link_code}/"

    headers = {
        "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.5938.62 Safari/537.36"
    }

    response = requests.get(url, headers=headers)
    response.raise_for_status()  # Raise an error if the request fails
    soup = BeautifulSoup(response.text, "html.parser")

    links = []

    # Look for the root container first
    root_container = soup.find("div", class_="root")
    if root_container:
        # Main Section: sc-d0a99dee-0 jBLEZz
        main_container = root_container.find("div", class_="sc-d0a99dee-0 jBLEZz")
        if main_container:
            for article_div in main_container.find_all("div", class_=re.compile(r"sc-67a2781f-0")):
                link_tag = article_div.find("a", href=True)
                if link_tag and link_tag["href"].startswith("https://www.nytimes.com/athletic/"):
                    links.append(link_tag["href"])

        # More Stories Section: sc-67a2781f-2 elMygu more-stories
        more_stories_container = root_container.find("div", class_="sc-67a2781f-2 elMygu more-stories")
        if more_stories_container:
            for story_div in more_stories_container.find_all("a", href=True):
                if story_div["href"].startswith("https://www.nytimes.com/athletic/"):
                    links.append(story_div["href"])

    return links


# Example Usage
team_name = "Orlando Magic"  # Example team name
extracted_links = scrape_nytimes(team_name)

# Output the results
print(extracted_links)
